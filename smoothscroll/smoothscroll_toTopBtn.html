<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title></title>
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	list-style: none;
}
header {
	height: 80px;
    background: #ccc;
}
.box {width: 100%; height: 100vh; background: #EDEDDF;}
.topBtn {
    padding: 1rem;
    color: #fff;
    position: fixed;
    right: 2vw;
    bottom: 2vh;
    background: #333;
}
</style>
</head>
<body id="top">
<header>header</header>
<main>
	<a class="" href="#pagelink">ページ内リンク</a>
	<p class="box"></p>
	<p id="pagelink">ページ内リンク飛び先</p>
	<p class="box"></p>
	<a class="topBtn" href="#top">TOP</a>

</main>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
$(function () {
	const topBtn = $('.topBtn');
	const speed = 500; // ミリ秒
	const start = 100; //ボタン表示開始するスクロール値

	topBtn.hide();
	$(window).scroll(function () {
		if ($(this).scrollTop() > start) {
			topBtn.fadeIn();
		} else {
			topBtn.fadeOut();
		}
	});

	$('a[href^="#"]').click(function () {
		const href = $(this).attr("href");
		const target = $(href == "#" || href == "" ? 'html' : href); //リンク先が#か空だったらhtmlにする
		const position = target.offset().top;
		$('body,html').animate({ scrollTop: position }, speed, 'swing');
		return false;
	});

});


</script>
</body id="header">
</html>
